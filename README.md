# Домашнее задание к занятию "`Репликация и масштабирование`" - `Попов Игорь`

---

### Задание 1

Выполните конфигурацию master-slave репликации, примером можно пользоваться из лекции.

На скриншоте настройка мастера:

![Скриншот-1](https://github.com/garkitt/popov/blob/cac73a2605090efbced1339f1fd6063532f023b2/img/master.png)

Создаем два инстанса, сеть, подключаемся. Далее создаем пользователя и узнам LOG STATUS.

На скрине ниже - slave

![Скриншот-2](https://github.com/garkitt/popov/blob/791e3f9b809e18f027921211dfd1480a72196f66/img/slave.png)

Подключаемся к master. По статусу - ошибок нет.


В DBeaver подключаемся к двум инстнсам. Добавил базу и таблицу. В slave отобразилось.

![Скриншот-3](https://github.com/garkitt/popov/blob/32169aa783c267ce1cd9c96fab2f4c77edef8188/img/dv.png)


### Задание 2.

1. Вертикальный шардинг (разделение по таблицам)
- Разделение таблиц между разными серверами по функциональному назначению
- Каждая группа таблиц располагается на выделенном сервере

2. Горизонтальный шардинг (разделение по данным)
- Разделение данных внутри таблиц по ключам шардирования
- Распределение строк таблицы между разными серверами


Сервер 1 - Пользователи

Вертикальный шардинг:
- Таблица: пользователи (users)
  Столбцы: id, email, username, password_hash, created_at, profile_data
  
Горизонтальный шардинг:
- Шард 1A: пользователи с id 1-1000000
- Шард 1B: пользователи с id 1000001-2000000
- Шард 1C: пользователи с id 2000001-3000000
Ключ шардирования: user_id (по диапазонам)


Сервер 2 - Книги

Вертикальный шардинг:
- Таблица: книги (books)
  Столбцы: id, title, author, genre, price, description
  
Горизонтальный шардинг:
- Шард 2A: книги с genre 'Фантастика'
- Шард 2B: книги с genre 'Художествая'
- Шард 2C: книги с genre 'Историческая'
Ключ шардирования: genre (по жанрам)


Сервер 3 - Магазины

Вертикальный шардинг:
- Таблица: магазины (stores)
  Столбцы: id, name, location, manager_id
  
Горизонтальный шардинг:
- Шард 3A: магазины с location 'Юг города'
- Шард 3B: магазины с location 'Центр города'
- Шард 3C: магазины с location 'Север города'
Ключ шардирования: location (по району)


![Скриншот-4](https://github.com/garkitt/popov/blob/2c40f7f7e18ecdfb9bc0906b0b9246656fb76adf/img/Shard.png)


Режимы работы серверов
1. Режим: Активный-активный (кластеризация)
-Маршрутизация запросов к нужным шардам
-Балансировка нагрузки

2. Режим: Мастер-реплика для каждого шарда
Шард XA: Мастер (запись/чтение) + 2 реплики (чтение)
Шард XB: Мастер (запись/чтение) + 2 реплики (чтение)
Шард XC: Мастер (запись/чтение) + 2 реплики (чтение)
- Хранение данных своего шарда
- Репликация на standby-серверы